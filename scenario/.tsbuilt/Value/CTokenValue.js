"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCTokenValue = exports.cTokenFetchers = exports.getCErc20DelegatorV = exports.getCTokenV = void 0;
const CoreValue_1 = require("../CoreValue");
const Command_1 = require("../Command");
const Value_1 = require("../Value");
const ContractLookup_1 = require("../ContractLookup");
async function getCTokenV(world, event) {
    const address = await CoreValue_1.mapValue(world, event, (str) => new Value_1.AddressV(ContractLookup_1.getCTokenAddress(world, str)), CoreValue_1.getCoreValue, Value_1.AddressV);
    return ContractLookup_1.getWorldContractByAddress(world, address.val);
}
exports.getCTokenV = getCTokenV;
async function getCErc20DelegatorV(world, event) {
    const address = await CoreValue_1.mapValue(world, event, (str) => new Value_1.AddressV(ContractLookup_1.getCTokenAddress(world, str)), CoreValue_1.getCoreValue, Value_1.AddressV);
    return ContractLookup_1.getWorldContractByAddress(world, address.val);
}
exports.getCErc20DelegatorV = getCErc20DelegatorV;
async function getInterestRateModel(world, cToken) {
    return new Value_1.AddressV(await cToken.methods.interestRateModel().call());
}
async function cTokenAddress(world, cToken) {
    return new Value_1.AddressV(cToken._address);
}
async function getCTokenAdmin(world, cToken) {
    return new Value_1.AddressV(await cToken.methods.admin().call());
}
async function getCTokenPendingAdmin(world, cToken) {
    return new Value_1.AddressV(await cToken.methods.pendingAdmin().call());
}
async function balanceOfUnderlying(world, cToken, user) {
    return new Value_1.NumberV(await cToken.methods.balanceOfUnderlying(user).call());
}
async function getBorrowBalance(world, cToken, user) {
    return new Value_1.NumberV(await cToken.methods.borrowBalanceCurrent(user).call());
}
async function getBorrowBalanceStored(world, cToken, user) {
    return new Value_1.NumberV(await cToken.methods.borrowBalanceStored(user).call());
}
async function getTotalBorrows(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.totalBorrows().call());
}
async function getTotalBorrowsCurrent(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.totalBorrowsCurrent().call());
}
async function getReserveFactor(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.reserveFactorMantissa().call(), 1.0e18);
}
async function getTotalReserves(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.totalReserves().call());
}
async function getComptroller(world, cToken) {
    return new Value_1.AddressV(await cToken.methods.comptroller().call());
}
async function getExchangeRateStored(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.exchangeRateStored().call());
}
async function getExchangeRate(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.exchangeRateCurrent().call(), 1e18);
}
async function getCash(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.getCash().call());
}
async function getInterestRate(world, cToken) {
    return new Value_1.NumberV(await cToken.methods.borrowRatePerBlock().call(), 1.0e18 / 10512000);
}
async function getImplementation(world, cToken) {
    return new Value_1.AddressV(await cToken.methods.implementation().call());
}
function cTokenFetchers() {
    return [
        new Command_1.Fetcher(`
        #### Address

        * "CToken <CToken> Address" - Returns address of CToken contract
          * E.g. "CToken cZRX Address" - Returns cZRX's address
      `, "Address", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => cTokenAddress(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### InterestRateModel

        * "CToken <CToken> InterestRateModel" - Returns the interest rate model of CToken contract
          * E.g. "CToken cZRX InterestRateModel" - Returns cZRX's interest rate model
      `, "InterestRateModel", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getInterestRateModel(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Admin

        * "CToken <CToken> Admin" - Returns the admin of CToken contract
          * E.g. "CToken cZRX Admin" - Returns cZRX's admin
      `, "Admin", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getCTokenAdmin(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### PendingAdmin

        * "CToken <CToken> PendingAdmin" - Returns the pending admin of CToken contract
          * E.g. "CToken cZRX PendingAdmin" - Returns cZRX's pending admin
      `, "PendingAdmin", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getCTokenPendingAdmin(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Underlying

        * "CToken <CToken> Underlying" - Returns the underlying asset (if applicable)
          * E.g. "CToken cZRX Underlying"
      `, "Underlying", [
            new Command_1.Arg("cToken", getCTokenV)
        ], async (world, { cToken }) => new Value_1.AddressV(await cToken.methods.underlying().call()), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### UnderlyingBalance

        * "CToken <CToken> UnderlyingBalance <User>" - Returns a user's underlying balance (based on given exchange rate)
          * E.g. "CToken cZRX UnderlyingBalance Geoff"
      `, "UnderlyingBalance", [
            new Command_1.Arg("cToken", getCTokenV),
            new Command_1.Arg("address", CoreValue_1.getAddressV)
        ], (world, { cToken, address }) => balanceOfUnderlying(world, cToken, address.val), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### BorrowBalance

        * "CToken <CToken> BorrowBalance <User>" - Returns a user's borrow balance (including interest)
          * E.g. "CToken cZRX BorrowBalance Geoff"
      `, "BorrowBalance", [
            new Command_1.Arg("cToken", getCTokenV),
            new Command_1.Arg("address", CoreValue_1.getAddressV)
        ], (world, { cToken, address }) => getBorrowBalance(world, cToken, address.val), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### BorrowBalanceStored

        * "CToken <CToken> BorrowBalanceStored <User>" - Returns a user's borrow balance (without specifically re-accruing interest)
          * E.g. "CToken cZRX BorrowBalanceStored Geoff"
      `, "BorrowBalanceStored", [
            new Command_1.Arg("cToken", getCTokenV),
            new Command_1.Arg("address", CoreValue_1.getAddressV)
        ], (world, { cToken, address }) => getBorrowBalanceStored(world, cToken, address.val), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### TotalBorrows

        * "CToken <CToken> TotalBorrows" - Returns the cToken's total borrow balance
          * E.g. "CToken cZRX TotalBorrows"
      `, "TotalBorrows", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getTotalBorrows(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### TotalBorrowsCurrent

        * "CToken <CToken> TotalBorrowsCurrent" - Returns the cToken's total borrow balance with interest
          * E.g. "CToken cZRX TotalBorrowsCurrent"
      `, "TotalBorrowsCurrent", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getTotalBorrowsCurrent(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Reserves

        * "CToken <CToken> Reserves" - Returns the cToken's total reserves
          * E.g. "CToken cZRX Reserves"
      `, "Reserves", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getTotalReserves(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### ReserveFactor

        * "CToken <CToken> ReserveFactor" - Returns reserve factor of CToken contract
          * E.g. "CToken cZRX ReserveFactor" - Returns cZRX's reserve factor
      `, "ReserveFactor", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getReserveFactor(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Comptroller

        * "CToken <CToken> Comptroller" - Returns the cToken's comptroller
          * E.g. "CToken cZRX Comptroller"
      `, "Comptroller", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getComptroller(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### ExchangeRateStored

        * "CToken <CToken> ExchangeRateStored" - Returns the cToken's exchange rate (based on balances stored)
          * E.g. "CToken cZRX ExchangeRateStored"
      `, "ExchangeRateStored", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getExchangeRateStored(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### ExchangeRate

        * "CToken <CToken> ExchangeRate" - Returns the cToken's current exchange rate
          * E.g. "CToken cZRX ExchangeRate"
      `, "ExchangeRate", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getExchangeRate(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Cash

        * "CToken <CToken> Cash" - Returns the cToken's current cash
          * E.g. "CToken cZRX Cash"
      `, "Cash", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getCash(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### InterestRate

        * "CToken <CToken> InterestRate" - Returns the cToken's current interest rate
          * E.g. "CToken cZRX InterestRate"
      `, "InterestRate", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getInterestRate(world, cToken), { namePos: 1 }),
        new Command_1.Fetcher(`
        #### CallNum

        * "CToken <CToken> Call <signature>" - Simple direct call method, for now with no parameters
          * E.g. "CToken cZRX Call \"borrowIndex()\""
      `, "CallNum", [
            new Command_1.Arg("cToken", getCTokenV),
            new Command_1.Arg("signature", CoreValue_1.getStringV),
        ], async (world, { cToken, signature }) => {
            const res = await world.web3.eth.call({
                to: cToken._address,
                data: world.web3.eth.abi.encodeFunctionSignature(signature.val)
            });
            const resNum = world.web3.eth.abi.decodeParameter('uint256', res);
            return new Value_1.NumberV(resNum);
        }, { namePos: 1 }),
        new Command_1.Fetcher(`
        #### Implementation

        * "CToken <CToken> Implementation" - Returns the cToken's current implementation
          * E.g. "CToken cDAI Implementation"
      `, "Implementation", [
            new Command_1.Arg("cToken", getCTokenV)
        ], (world, { cToken }) => getImplementation(world, cToken), { namePos: 1 })
    ];
}
exports.cTokenFetchers = cTokenFetchers;
async function getCTokenValue(world, event) {
    return await Command_1.getFetcherValue("cToken", cTokenFetchers(), world, event);
}
exports.getCTokenValue = getCTokenValue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ1Rva2VuVmFsdWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvVmFsdWUvQ1Rva2VuVmFsdWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBS0EsNENBS3NCO0FBQ3RCLHdDQUEyRDtBQUMzRCxvQ0FLa0I7QUFDbEIsc0RBQWdGO0FBRXpFLEtBQUssVUFBVSxVQUFVLENBQUMsS0FBWSxFQUFFLEtBQVk7SUFDekQsTUFBTSxPQUFPLEdBQUcsTUFBTSxvQkFBUSxDQUM1QixLQUFLLEVBQ0wsS0FBSyxFQUNMLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLGdCQUFRLENBQUMsaUNBQWdCLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQ25ELHdCQUFZLEVBQ1osZ0JBQVEsQ0FDVCxDQUFDO0lBRUYsT0FBTywwQ0FBeUIsQ0FBUyxLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFWRCxnQ0FVQztBQUVNLEtBQUssVUFBVSxtQkFBbUIsQ0FBQyxLQUFZLEVBQUUsS0FBWTtJQUNsRSxNQUFNLE9BQU8sR0FBRyxNQUFNLG9CQUFRLENBQzVCLEtBQUssRUFDTCxLQUFLLEVBQ0wsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksZ0JBQVEsQ0FBQyxpQ0FBZ0IsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFDbkQsd0JBQVksRUFDWixnQkFBUSxDQUNULENBQUM7SUFFRixPQUFPLDBDQUF5QixDQUFrQixLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hFLENBQUM7QUFWRCxrREFVQztBQUVELEtBQUssVUFBVSxvQkFBb0IsQ0FBQyxLQUFZLEVBQUUsTUFBYztJQUM5RCxPQUFPLElBQUksZ0JBQVEsQ0FBQyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZFLENBQUM7QUFF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b3JsZCB9IGZyb20gJy4uL1dvcmxkJztcbmltcG9ydCB7IENUb2tlbiB9IGZyb20gJy4uL0NvbnRyYWN0L0NUb2tlbic7XG5pbXBvcnQgeyBDRXJjMjBEZWxlZ2F0b3IgfSBmcm9tICcuLi9Db250cmFjdC9DRXJjMjBEZWxlZ2F0b3InO1xuaW1wb3J0IHsgRXJjMjAgfSBmcm9tICcuLi9Db250cmFjdC9FcmMyMCc7XG5pbXBvcnQge1xuICBnZXRBZGRyZXNzVixcbiAgZ2V0Q29yZVZhbHVlLFxuICBnZXRTdHJpbmdWLFxuICBtYXBWYWx1ZVxufSBmcm9tICcuLi9Db3JlVmFsdWUnO1xuaW1wb3J0IHsgQXJnLCBGZXRjaGVyLCBnZXRGZXRjaGVyVmFsdWUgfSBmcm9tICcuLi9Db21tYW5kJztcbmltcG9ydCB7XG4gIEFkZHJlc3NWLFxuICBOdW1iZXJWLFxuICBWYWx1ZSxcbiAgU3RyaW5nVlxufSBmcm9tICcuLi9WYWx1ZSc7XG5pbXBvcnQgeyBnZXRXb3JsZENvbnRyYWN0QnlBZGRyZXNzLCBnZXRDVG9rZW5BZGRyZXNzIH0gZnJvbSAnLi4vQ29udHJhY3RMb29rdXAnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q1Rva2VuVih3b3JsZDogV29ybGQsIGV2ZW50OiBFdmVudCk6IFByb21pc2U8Q1Rva2VuPiB7XG4gIGNvbnN0IGFkZHJlc3MgPSBhd2FpdCBtYXBWYWx1ZTxBZGRyZXNzVj4oXG4gICAgd29ybGQsXG4gICAgZXZlbnQsXG4gICAgKHN0cikgPT4gbmV3IEFkZHJlc3NWKGdldENUb2tlbkFkZHJlc3Mod29ybGQsIHN0cikpLFxuICAgIGdldENvcmVWYWx1ZSxcbiAgICBBZGRyZXNzVlxuICApO1xuXG4gIHJldHVybiBnZXRXb3JsZENvbnRyYWN0QnlBZGRyZXNzPENUb2tlbj4od29ybGQsIGFkZHJlc3MudmFsKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENFcmMyMERlbGVnYXRvclYod29ybGQ6IFdvcmxkLCBldmVudDogRXZlbnQpOiBQcm9taXNlPENFcmMyMERlbGVnYXRvcj4ge1xuICBjb25zdCBhZGRyZXNzID0gYXdhaXQgbWFwVmFsdWU8QWRkcmVzc1Y+KFxuICAgIHdvcmxkLFxuICAgIGV2ZW50LFxuICAgIChzdHIpID0+IG5ldyBBZGRyZXNzVihnZXRDVG9rZW5BZGRyZXNzKHdvcmxkLCBzdHIpKSxcbiAgICBnZXRDb3JlVmFsdWUsXG4gICAgQWRkcmVzc1ZcbiAgKTtcblxuICByZXR1cm4gZ2V0V29ybGRDb250cmFjdEJ5QWRkcmVzczxDRXJjMjBEZWxlZ2F0b3I+KHdvcmxkLCBhZGRyZXNzLnZhbCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEludGVyZXN0UmF0ZU1vZGVsKHdvcmxkOiBXb3JsZCwgY1Rva2VuOiBDVG9rZW4pOiBQcm9taXNlPEFkZHJlc3NWPiB7XG4gIHJldHVybiBuZXcgQWRkcmVzc1YoYXdhaXQgY1Rva2VuLm1ldGhvZHMuaW50ZXJlc3RSYXRlTW9kZWwoKS5jYWxsKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjVG9rZW5BZGRyZXNzKHdvcmxkOiBXb3JsZCwgY1Rva2VuOiBDVG9rZW4pOiBQcm9taXNlPEFkZHJlc3NWPiB7XG4gIHJldHVybiBuZXcgQWRkcmVzc1YoY1Rva2VuLl9hZGRyZXNzKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q1Rva2VuQWRtaW4od29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbik6IFByb21pc2U8QWRkcmVzc1Y+IHtcbiAgcmV0dXJuIG5ldyBBZGRyZXNzVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5hZG1pbigpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENUb2tlblBlbmRpbmdBZG1pbih3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuKTogUHJvbWlzZTxBZGRyZXNzVj4ge1xuICByZXR1cm4gbmV3IEFkZHJlc3NWKGF3YWl0IGNUb2tlbi5tZXRob2RzLnBlbmRpbmdBZG1pbigpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGJhbGFuY2VPZlVuZGVybHlpbmcod29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbiwgdXNlcjogc3RyaW5nKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5iYWxhbmNlT2ZVbmRlcmx5aW5nKHVzZXIpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJvcnJvd0JhbGFuY2Uod29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbiwgdXNlcik6IFByb21pc2U8TnVtYmVyVj4ge1xuICByZXR1cm4gbmV3IE51bWJlclYoYXdhaXQgY1Rva2VuLm1ldGhvZHMuYm9ycm93QmFsYW5jZUN1cnJlbnQodXNlcikuY2FsbCgpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qm9ycm93QmFsYW5jZVN0b3JlZCh3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuLCB1c2VyKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5ib3Jyb3dCYWxhbmNlU3RvcmVkKHVzZXIpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsQm9ycm93cyh3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy50b3RhbEJvcnJvd3MoKS5jYWxsKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUb3RhbEJvcnJvd3NDdXJyZW50KHdvcmxkOiBXb3JsZCwgY1Rva2VuOiBDVG9rZW4pOiBQcm9taXNlPE51bWJlclY+IHtcbiAgcmV0dXJuIG5ldyBOdW1iZXJWKGF3YWl0IGNUb2tlbi5tZXRob2RzLnRvdGFsQm9ycm93c0N1cnJlbnQoKS5jYWxsKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSZXNlcnZlRmFjdG9yKHdvcmxkOiBXb3JsZCwgY1Rva2VuOiBDVG9rZW4pOiBQcm9taXNlPE51bWJlclY+IHtcbiAgcmV0dXJuIG5ldyBOdW1iZXJWKGF3YWl0IGNUb2tlbi5tZXRob2RzLnJlc2VydmVGYWN0b3JNYW50aXNzYSgpLmNhbGwoKSwgMS4wZTE4KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxSZXNlcnZlcyh3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy50b3RhbFJlc2VydmVzKCkuY2FsbCgpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q29tcHRyb2xsZXIod29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbik6IFByb21pc2U8QWRkcmVzc1Y+IHtcbiAgcmV0dXJuIG5ldyBBZGRyZXNzVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5jb21wdHJvbGxlcigpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEV4Y2hhbmdlUmF0ZVN0b3JlZCh3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5leGNoYW5nZVJhdGVTdG9yZWQoKS5jYWxsKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRFeGNoYW5nZVJhdGUod29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbik6IFByb21pc2U8TnVtYmVyVj4ge1xuICByZXR1cm4gbmV3IE51bWJlclYoYXdhaXQgY1Rva2VuLm1ldGhvZHMuZXhjaGFuZ2VSYXRlQ3VycmVudCgpLmNhbGwoKSwgMWUxOCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENhc2god29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbik6IFByb21pc2U8TnVtYmVyVj4ge1xuICByZXR1cm4gbmV3IE51bWJlclYoYXdhaXQgY1Rva2VuLm1ldGhvZHMuZ2V0Q2FzaCgpLmNhbGwoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEludGVyZXN0UmF0ZSh3b3JsZDogV29ybGQsIGNUb2tlbjogQ1Rva2VuKTogUHJvbWlzZTxOdW1iZXJWPiB7XG4gIHJldHVybiBuZXcgTnVtYmVyVihhd2FpdCBjVG9rZW4ubWV0aG9kcy5ib3Jyb3dSYXRlUGVyQmxvY2soKS5jYWxsKCksIDEuMGUxOCAvIDEwNTEyMDAwKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0SW1wbGVtZW50YXRpb24od29ybGQ6IFdvcmxkLCBjVG9rZW46IENUb2tlbik6IFByb21pc2U8QWRkcmVzc1Y+IHtcbiAgcmV0dXJuIG5ldyBBZGRyZXNzVihhd2FpdCAoY1Rva2VuIGFzIENFcmMyMERlbGVnYXRvcikubWV0aG9kcy5pbXBsZW1lbnRhdGlvbigpLmNhbGwoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjVG9rZW5GZXRjaGVycygpIHtcbiAgcmV0dXJuIFtcbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIEFkZHJlc3NWPihgXG4gICAgICAgICMjIyMgQWRkcmVzc1xuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gQWRkcmVzc1wiIC0gUmV0dXJucyBhZGRyZXNzIG9mIENUb2tlbiBjb250cmFjdFxuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIEFkZHJlc3NcIiAtIFJldHVybnMgY1pSWCdzIGFkZHJlc3NcbiAgICAgIGAsXG4gICAgICBcIkFkZHJlc3NcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gY1Rva2VuQWRkcmVzcyh3b3JsZCwgY1Rva2VuKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcblxuICAgIG5ldyBGZXRjaGVyPHsgY1Rva2VuOiBDVG9rZW4gfSwgQWRkcmVzc1Y+KGBcbiAgICAgICAgIyMjIyBJbnRlcmVzdFJhdGVNb2RlbFxuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gSW50ZXJlc3RSYXRlTW9kZWxcIiAtIFJldHVybnMgdGhlIGludGVyZXN0IHJhdGUgbW9kZWwgb2YgQ1Rva2VuIGNvbnRyYWN0XG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggSW50ZXJlc3RSYXRlTW9kZWxcIiAtIFJldHVybnMgY1pSWCdzIGludGVyZXN0IHJhdGUgbW9kZWxcbiAgICAgIGAsXG4gICAgICBcIkludGVyZXN0UmF0ZU1vZGVsXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJjVG9rZW5cIiwgZ2V0Q1Rva2VuVilcbiAgICAgIF0sXG4gICAgICAod29ybGQsIHsgY1Rva2VuIH0pID0+IGdldEludGVyZXN0UmF0ZU1vZGVsKHdvcmxkLCBjVG9rZW4pLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiB9LCBBZGRyZXNzVj4oYFxuICAgICAgICAjIyMjIEFkbWluXG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBBZG1pblwiIC0gUmV0dXJucyB0aGUgYWRtaW4gb2YgQ1Rva2VuIGNvbnRyYWN0XG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggQWRtaW5cIiAtIFJldHVybnMgY1pSWCdzIGFkbWluXG4gICAgICBgLFxuICAgICAgXCJBZG1pblwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCB7IGNUb2tlbiB9KSA9PiBnZXRDVG9rZW5BZG1pbih3b3JsZCwgY1Rva2VuKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcblxuICAgIG5ldyBGZXRjaGVyPHsgY1Rva2VuOiBDVG9rZW4gfSwgQWRkcmVzc1Y+KGBcbiAgICAgICAgIyMjIyBQZW5kaW5nQWRtaW5cblxuICAgICAgICAqIFwiQ1Rva2VuIDxDVG9rZW4+IFBlbmRpbmdBZG1pblwiIC0gUmV0dXJucyB0aGUgcGVuZGluZyBhZG1pbiBvZiBDVG9rZW4gY29udHJhY3RcbiAgICAgICAgICAqIEUuZy4gXCJDVG9rZW4gY1pSWCBQZW5kaW5nQWRtaW5cIiAtIFJldHVybnMgY1pSWCdzIHBlbmRpbmcgYWRtaW5cbiAgICAgIGAsXG4gICAgICBcIlBlbmRpbmdBZG1pblwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCB7IGNUb2tlbiB9KSA9PiBnZXRDVG9rZW5QZW5kaW5nQWRtaW4od29ybGQsIGNUb2tlbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIEFkZHJlc3NWPihgXG4gICAgICAgICMjIyMgVW5kZXJseWluZ1xuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gVW5kZXJseWluZ1wiIC0gUmV0dXJucyB0aGUgdW5kZXJseWluZyBhc3NldCAoaWYgYXBwbGljYWJsZSlcbiAgICAgICAgICAqIEUuZy4gXCJDVG9rZW4gY1pSWCBVbmRlcmx5aW5nXCJcbiAgICAgIGAsXG4gICAgICBcIlVuZGVybHlpbmdcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgIGFzeW5jICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gbmV3IEFkZHJlc3NWKGF3YWl0IGNUb2tlbi5tZXRob2RzLnVuZGVybHlpbmcoKS5jYWxsKCkpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiwgYWRkcmVzczogQWRkcmVzc1YgfSwgTnVtYmVyVj4oYFxuICAgICAgICAjIyMjIFVuZGVybHlpbmdCYWxhbmNlXG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBVbmRlcmx5aW5nQmFsYW5jZSA8VXNlcj5cIiAtIFJldHVybnMgYSB1c2VyJ3MgdW5kZXJseWluZyBiYWxhbmNlIChiYXNlZCBvbiBnaXZlbiBleGNoYW5nZSByYXRlKVxuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIFVuZGVybHlpbmdCYWxhbmNlIEdlb2ZmXCJcbiAgICAgIGAsXG4gICAgICBcIlVuZGVybHlpbmdCYWxhbmNlXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJjVG9rZW5cIiwgZ2V0Q1Rva2VuViksXG4gICAgICAgIG5ldyBBcmc8QWRkcmVzc1Y+KFwiYWRkcmVzc1wiLCBnZXRBZGRyZXNzVilcbiAgICAgIF0sXG4gICAgICAod29ybGQsIHsgY1Rva2VuLCBhZGRyZXNzIH0pID0+IGJhbGFuY2VPZlVuZGVybHlpbmcod29ybGQsIGNUb2tlbiwgYWRkcmVzcy52YWwpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiwgYWRkcmVzczogQWRkcmVzc1YgfSwgTnVtYmVyVj4oYFxuICAgICAgICAjIyMjIEJvcnJvd0JhbGFuY2VcblxuICAgICAgICAqIFwiQ1Rva2VuIDxDVG9rZW4+IEJvcnJvd0JhbGFuY2UgPFVzZXI+XCIgLSBSZXR1cm5zIGEgdXNlcidzIGJvcnJvdyBiYWxhbmNlIChpbmNsdWRpbmcgaW50ZXJlc3QpXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggQm9ycm93QmFsYW5jZSBHZW9mZlwiXG4gICAgICBgLFxuICAgICAgXCJCb3Jyb3dCYWxhbmNlXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJjVG9rZW5cIiwgZ2V0Q1Rva2VuViksXG4gICAgICAgIG5ldyBBcmcoXCJhZGRyZXNzXCIsIGdldEFkZHJlc3NWKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4sIGFkZHJlc3MgfSkgPT4gZ2V0Qm9ycm93QmFsYW5jZSh3b3JsZCwgY1Rva2VuLCBhZGRyZXNzLnZhbCksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuLCBhZGRyZXNzOiBBZGRyZXNzViB9LCBOdW1iZXJWPihgXG4gICAgICAgICMjIyMgQm9ycm93QmFsYW5jZVN0b3JlZFxuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gQm9ycm93QmFsYW5jZVN0b3JlZCA8VXNlcj5cIiAtIFJldHVybnMgYSB1c2VyJ3MgYm9ycm93IGJhbGFuY2UgKHdpdGhvdXQgc3BlY2lmaWNhbGx5IHJlLWFjY3J1aW5nIGludGVyZXN0KVxuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIEJvcnJvd0JhbGFuY2VTdG9yZWQgR2VvZmZcIlxuICAgICAgYCxcbiAgICAgIFwiQm9ycm93QmFsYW5jZVN0b3JlZFwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpLFxuICAgICAgICBuZXcgQXJnKFwiYWRkcmVzc1wiLCBnZXRBZGRyZXNzVilcbiAgICAgIF0sXG4gICAgICAod29ybGQsIHsgY1Rva2VuLCBhZGRyZXNzIH0pID0+IGdldEJvcnJvd0JhbGFuY2VTdG9yZWQod29ybGQsIGNUb2tlbiwgYWRkcmVzcy52YWwpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiB9LCBOdW1iZXJWPihgXG4gICAgICAgICMjIyMgVG90YWxCb3Jyb3dzXG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBUb3RhbEJvcnJvd3NcIiAtIFJldHVybnMgdGhlIGNUb2tlbidzIHRvdGFsIGJvcnJvdyBiYWxhbmNlXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggVG90YWxCb3Jyb3dzXCJcbiAgICAgIGAsXG4gICAgICBcIlRvdGFsQm9ycm93c1wiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCB7IGNUb2tlbiB9KSA9PiBnZXRUb3RhbEJvcnJvd3Mod29ybGQsIGNUb2tlbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIE51bWJlclY+KGBcbiAgICAgICAgIyMjIyBUb3RhbEJvcnJvd3NDdXJyZW50XG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBUb3RhbEJvcnJvd3NDdXJyZW50XCIgLSBSZXR1cm5zIHRoZSBjVG9rZW4ncyB0b3RhbCBib3Jyb3cgYmFsYW5jZSB3aXRoIGludGVyZXN0XG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggVG90YWxCb3Jyb3dzQ3VycmVudFwiXG4gICAgICBgLFxuICAgICAgXCJUb3RhbEJvcnJvd3NDdXJyZW50XCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJjVG9rZW5cIiwgZ2V0Q1Rva2VuVilcbiAgICAgIF0sXG4gICAgICAod29ybGQsIHsgY1Rva2VuIH0pID0+IGdldFRvdGFsQm9ycm93c0N1cnJlbnQod29ybGQsIGNUb2tlbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIE51bWJlclY+KGBcbiAgICAgICAgIyMjIyBSZXNlcnZlc1xuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gUmVzZXJ2ZXNcIiAtIFJldHVybnMgdGhlIGNUb2tlbidzIHRvdGFsIHJlc2VydmVzXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggUmVzZXJ2ZXNcIlxuICAgICAgYCxcbiAgICAgIFwiUmVzZXJ2ZXNcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gZ2V0VG90YWxSZXNlcnZlcyh3b3JsZCwgY1Rva2VuKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcblxuICAgIG5ldyBGZXRjaGVyPHsgY1Rva2VuOiBDVG9rZW4gfSwgTnVtYmVyVj4oYFxuICAgICAgICAjIyMjIFJlc2VydmVGYWN0b3JcblxuICAgICAgICAqIFwiQ1Rva2VuIDxDVG9rZW4+IFJlc2VydmVGYWN0b3JcIiAtIFJldHVybnMgcmVzZXJ2ZSBmYWN0b3Igb2YgQ1Rva2VuIGNvbnRyYWN0XG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggUmVzZXJ2ZUZhY3RvclwiIC0gUmV0dXJucyBjWlJYJ3MgcmVzZXJ2ZSBmYWN0b3JcbiAgICAgIGAsXG4gICAgICBcIlJlc2VydmVGYWN0b3JcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gZ2V0UmVzZXJ2ZUZhY3Rvcih3b3JsZCwgY1Rva2VuKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcblxuICAgIG5ldyBGZXRjaGVyPHsgY1Rva2VuOiBDVG9rZW4gfSwgQWRkcmVzc1Y+KGBcbiAgICAgICAgIyMjIyBDb21wdHJvbGxlclxuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gQ29tcHRyb2xsZXJcIiAtIFJldHVybnMgdGhlIGNUb2tlbidzIGNvbXB0cm9sbGVyXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggQ29tcHRyb2xsZXJcIlxuICAgICAgYCxcbiAgICAgIFwiQ29tcHRyb2xsZXJcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gZ2V0Q29tcHRyb2xsZXIod29ybGQsIGNUb2tlbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIE51bWJlclY+KGBcbiAgICAgICAgIyMjIyBFeGNoYW5nZVJhdGVTdG9yZWRcblxuICAgICAgICAqIFwiQ1Rva2VuIDxDVG9rZW4+IEV4Y2hhbmdlUmF0ZVN0b3JlZFwiIC0gUmV0dXJucyB0aGUgY1Rva2VuJ3MgZXhjaGFuZ2UgcmF0ZSAoYmFzZWQgb24gYmFsYW5jZXMgc3RvcmVkKVxuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIEV4Y2hhbmdlUmF0ZVN0b3JlZFwiXG4gICAgICBgLFxuICAgICAgXCJFeGNoYW5nZVJhdGVTdG9yZWRcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gZ2V0RXhjaGFuZ2VSYXRlU3RvcmVkKHdvcmxkLCBjVG9rZW4pLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiB9LCBOdW1iZXJWPihgXG4gICAgICAgICMjIyMgRXhjaGFuZ2VSYXRlXG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBFeGNoYW5nZVJhdGVcIiAtIFJldHVybnMgdGhlIGNUb2tlbidzIGN1cnJlbnQgZXhjaGFuZ2UgcmF0ZVxuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIEV4Y2hhbmdlUmF0ZVwiXG4gICAgICBgLFxuICAgICAgXCJFeGNoYW5nZVJhdGVcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKVxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgeyBjVG9rZW4gfSkgPT4gZ2V0RXhjaGFuZ2VSYXRlKHdvcmxkLCBjVG9rZW4pLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IEZldGNoZXI8eyBjVG9rZW46IENUb2tlbiB9LCBOdW1iZXJWPihgXG4gICAgICAgICMjIyMgQ2FzaFxuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gQ2FzaFwiIC0gUmV0dXJucyB0aGUgY1Rva2VuJ3MgY3VycmVudCBjYXNoXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggQ2FzaFwiXG4gICAgICBgLFxuICAgICAgXCJDYXNoXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJjVG9rZW5cIiwgZ2V0Q1Rva2VuVilcbiAgICAgIF0sXG4gICAgICAod29ybGQsIHsgY1Rva2VuIH0pID0+IGdldENhc2god29ybGQsIGNUb2tlbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgRmV0Y2hlcjx7IGNUb2tlbjogQ1Rva2VuIH0sIE51bWJlclY+KGBcbiAgICAgICAgIyMjIyBJbnRlcmVzdFJhdGVcblxuICAgICAgICAqIFwiQ1Rva2VuIDxDVG9rZW4+IEludGVyZXN0UmF0ZVwiIC0gUmV0dXJucyB0aGUgY1Rva2VuJ3MgY3VycmVudCBpbnRlcmVzdCByYXRlXG4gICAgICAgICAgKiBFLmcuIFwiQ1Rva2VuIGNaUlggSW50ZXJlc3RSYXRlXCJcbiAgICAgIGAsXG4gICAgICBcIkludGVyZXN0UmF0ZVwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCB7Y1Rva2VufSkgPT4gZ2V0SW50ZXJlc3RSYXRlKHdvcmxkLCBjVG9rZW4pLFxuICAgICAge25hbWVQb3M6IDF9XG4gICAgKSxcbiAgICBuZXcgRmV0Y2hlcjx7Y1Rva2VuOiBDVG9rZW4sIHNpZ25hdHVyZTogU3RyaW5nVn0sIE51bWJlclY+KGBcbiAgICAgICAgIyMjIyBDYWxsTnVtXG5cbiAgICAgICAgKiBcIkNUb2tlbiA8Q1Rva2VuPiBDYWxsIDxzaWduYXR1cmU+XCIgLSBTaW1wbGUgZGlyZWN0IGNhbGwgbWV0aG9kLCBmb3Igbm93IHdpdGggbm8gcGFyYW1ldGVyc1xuICAgICAgICAgICogRS5nLiBcIkNUb2tlbiBjWlJYIENhbGwgXFxcImJvcnJvd0luZGV4KClcXFwiXCJcbiAgICAgIGAsXG4gICAgICBcIkNhbGxOdW1cIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImNUb2tlblwiLCBnZXRDVG9rZW5WKSxcbiAgICAgICAgbmV3IEFyZyhcInNpZ25hdHVyZVwiLCBnZXRTdHJpbmdWKSxcbiAgICAgIF0sXG4gICAgICBhc3luYyAod29ybGQsIHtjVG9rZW4sIHNpZ25hdHVyZX0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgd29ybGQud2ViMy5ldGguY2FsbCh7XG4gICAgICAgICAgICB0bzogY1Rva2VuLl9hZGRyZXNzLFxuICAgICAgICAgICAgZGF0YTogd29ybGQud2ViMy5ldGguYWJpLmVuY29kZUZ1bmN0aW9uU2lnbmF0dXJlKHNpZ25hdHVyZS52YWwpXG4gICAgICAgICAgfSlcbiAgICAgICAgY29uc3QgcmVzTnVtIDogYW55ID0gd29ybGQud2ViMy5ldGguYWJpLmRlY29kZVBhcmFtZXRlcigndWludDI1NicscmVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJWKHJlc051bSk7XG4gICAgICB9XG4gICAgICAsXG4gICAgICB7bmFtZVBvczogMX1cbiAgICApLFxuICAgIG5ldyBGZXRjaGVyPHsgY1Rva2VuOiBDVG9rZW4gfSwgQWRkcmVzc1Y+KGBcbiAgICAgICAgIyMjIyBJbXBsZW1lbnRhdGlvblxuXG4gICAgICAgICogXCJDVG9rZW4gPENUb2tlbj4gSW1wbGVtZW50YXRpb25cIiAtIFJldHVybnMgdGhlIGNUb2tlbidzIGN1cnJlbnQgaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAqIEUuZy4gXCJDVG9rZW4gY0RBSSBJbXBsZW1lbnRhdGlvblwiXG4gICAgICBgLFxuICAgICAgXCJJbXBsZW1lbnRhdGlvblwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiY1Rva2VuXCIsIGdldENUb2tlblYpXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCB7IGNUb2tlbiB9KSA9PiBnZXRJbXBsZW1lbnRhdGlvbih3b3JsZCwgY1Rva2VuKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKVxuICBdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q1Rva2VuVmFsdWUod29ybGQ6IFdvcmxkLCBldmVudDogRXZlbnQpOiBQcm9taXNlPFZhbHVlPiB7XG4gIHJldHVybiBhd2FpdCBnZXRGZXRjaGVyVmFsdWU8YW55LCBhbnk+KFwiY1Rva2VuXCIsIGNUb2tlbkZldGNoZXJzKCksIHdvcmxkLCBldmVudCk7XG59XG4iXX0=